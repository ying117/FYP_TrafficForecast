html,
body,
#root {
  height: 100%;
}

.app {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  font-family: var(--font-base);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

:root {
  --waze-blue: #3584e4;
  --waze-dark-blue: #2563eb;
  --waze-light-blue: #eff6ff;
  --waze-green: #22c55e;
  --waze-yellow: #facc15;
  --waze-red: #ef4444;
  --font-base: Georgia, "Times New Roman", Times, serif;
  --z-overlay: 99990;
  --z-overlay-card: 99991;
}

body {
  margin: 0;
  font-family: system-ui, sans-serif;
  background-color: #f9fafb;
}

button,
input,
select,
textarea {
  font: inherit;
}

/* Header */
.header {
  background-color: var(--waze-blue);
  color: white;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}
.header .title {
  font-size: 1.25rem;
  font-weight: bold;
}
.header button {
  background: none;
  border: none;
  color: inherit;
  margin-left: 0.5rem;
  cursor: pointer;
  font-size: 1rem;
}

/* Search bar */
.search-bar {
  background: #fff;
  padding: 1rem;
  border-bottom: 1px solid #e5e7eb;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}
.search-bar .inputs {
  display: flex;
  gap: 0.5rem;
}
.search-bar input {
  flex: 1;
  padding: 0.5rem;
  border: 1px solid #d1d5db;
  border-radius: 4px;
  font-size: 1rem;
}

/* Keep the blue Go button white-text */
.search-bar .inputs > button {
  padding: 0.5rem 1rem;
  background: var(--waze-blue);
  color: #fff; /* <-- keeps Go readable */
  border: 0;
  border-radius: 4px;
  cursor: pointer;
  font-size: 1rem;
}
.search-bar .inputs > button:hover {
  background: var(--waze-dark-blue);
}

/* If you have chip buttons below the inputs, make their text dark */
.search-bar .chip {
  color: #1e3a8a;
}

/* Map area */
.map-wrapper {
  position: relative;
  flex: 1;
  min-height: 400px;
}

/* Route panel */
.route-panel {
  background: #fff;
  padding: 1rem;
  border-top: 1px solid #e5e7eb;
  max-height: 200px;
  overflow-y: auto;
}
.route-panel h3 {
  margin: 0 0 0.5rem 0;
  font-size: 1.125rem;
}
.route-item {
  border: 1px solid #e5e7eb;
  border-radius: 4px;
  padding: 0.5rem;
  margin-bottom: 0.5rem;
  cursor: pointer;
}
.route-item.primary {
  background: var(--waze-light-blue);
  border-color: var(--waze-blue);
}
.route-item .title {
  font-weight: 700;
  margin-right: 0.5rem;
}
.route-item .label {
  background: var(--waze-blue);
  color: #fff;
  border-radius: 999px;
  padding: 0 0.5rem;
  font-size: 0.75rem;
}
.route-item .meta {
  display: flex;
  gap: 1rem;
  font-size: 0.875rem;
  color: #6b7280;
  margin-top: 0.25rem;
}

/* Alerts */
.alerts {
  position: absolute;
  top: 70px;
  left: 1rem;
  right: 1rem;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  z-index: 10;
  pointer-events: none;
}
.alert {
  background: rgba(255, 255, 255, 0.95);
  border: 1px solid #e5e7eb;
  padding: 0.5rem;
  border-radius: 4px;
  display: flex;
  align-items: flex-start;
  gap: 0.5rem;
  pointer-events: auto;
  font-size: 0.875rem;
}
.alert.high {
  border-color: var(--waze-red);
  background: rgba(239, 68, 68, 0.1);
}
.alert.medium {
  border-color: var(--waze-yellow);
  background: rgba(250, 204, 21, 0.1);
}
.alert.low {
  border-color: var(--waze-green);
  background: rgba(34, 197, 94, 0.1);
}
.alert .close {
  margin-left: auto;
  background: none;
  border: 0;
  cursor: pointer;
  font-weight: 700;
  color: inherit;
}

/* --- Drawer / Menu (single, deduped) --- */
.drawer-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.25);
  transition: opacity 0.18s ease-in-out;
  z-index: 30;
}
.drawer {
  position: fixed;
  inset: 0 auto 0 0;
  width: 300px;
  background: #ffffff;
  border-right: 1px solid #e5e7eb;
  box-shadow: 2px 0 10px rgba(0, 0, 0, 0.08);
  z-index: 31;
  display: flex;
  flex-direction: column;
  transform: translateX(-100%);
  transition: transform 0.18s ease-in-out;
}
.drawer-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.875rem 1rem;
  border-bottom: 1px solid #e5e7eb;
}
.drawer-close {
  background: none;
  border: 0;
  font-size: 1.25rem;
  cursor: pointer;
}
.drawer-brand {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 1.05rem;
}
.drawer-brand .brand-mark {
  font-size: 1.2rem;
}

.menu-section {
  padding: 0.5rem 0;
  border-bottom: 1px solid #f3f4f6;
}
.menu-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.75rem 1rem;
  cursor: pointer;
}
.menu-row:hover {
  background: #f8fafc;
}
.menu-left {
  display: flex;
  align-items: center;
  gap: 0.75rem;
}
.menu-emoji {
  width: 1.5rem;
  text-align: center;
}

.menu-link {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.75rem 1rem;
  color: #111827;
  text-decoration: none;
}
.menu-link:hover {
  background: #f8fafc;
}
.chev {
  color: #6b7280;
}

/* iOS-style toggle */
.switch {
  position: relative;
  width: 44px;
  height: 24px;
}
.switch input {
  appearance: none;
  -webkit-appearance: none;
  width: 100%;
  height: 100%;
  margin: 0;
  position: absolute;
  inset: 0;
  opacity: 0;
  cursor: pointer;
}
.switch .slider {
  position: absolute;
  inset: 0;
  background: #cbd5e1;
  border-radius: 999px;
  transition: background 0.18s;
}
.switch .slider::after {
  content: "";
  position: absolute;
  top: 3px;
  left: 3px;
  width: 18px;
  height: 18px;
  background: #fff;
  border-radius: 50%;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
  transition: transform 0.18s;
}
.switch input:checked + .slider {
  background: var(--waze-blue);
}
.switch input:checked + .slider::after {
  transform: translateX(20px);
}

/* Prediction badges + confidence */
.pred-badge {
  padding: 0 0.5rem;
  border-radius: 999px;
  font-size: 0.72rem;
  font-weight: 700;
  border: 1px solid #cbd5e1;
}
.pred-badge.best {
  background: #e6f2ff;
  color: #0b63d1;
  border-color: #b7d4ff;
}
.pred-badge.worst {
  background: #fde8e8;
  color: #b91c1c;
  border-color: #fecaca;
}

.pred-conf {
  font-size: 0.75rem;
  color: #475569;
}

/* --- Theme support --- */
.app[data-theme="dark"] {
  color-scheme: dark;
  background: #0b1220;
  color: #e5e7eb;
}
.app[data-theme="dark"] .header {
  background: #1e293b; /* slate-800 */
  color: #ffffff;
}
.app[data-theme="dark"] .search-bar,
.app[data-theme="dark"] .route-panel,
.app[data-theme="dark"] .drawer,
.app[data-theme="dark"] .alerts .alert {
  background: #111827; /* gray-900 */
  color: #e5e7eb;
  border-color: #374151;
}
.app[data-theme="dark"] .chip {
  background: #0f172a;
  color: #e5e7eb;
  border-color: #334155;
}
.app[data-theme="dark"] button {
  color: #e5e7eb;
  border-color: rgba(255, 255, 255, 0.5);
}

/* ===== Saved Routes page ===== */
.sr-page {
  padding: 16px;
  max-width: 1200px;
  margin: 0 auto;
}
.sr-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 10px;
}
.sr-title-wrap {
  display: flex;
  align-items: center;
  gap: 10px;
}
.sr-title-icon {
  font-size: 28px;
  color: #f59e0b;
}
.sr-title {
  margin: 0;
  font-size: 28px;
  font-weight: 800;
  color: #111827;
}

.sr-grid {
  display: grid;
  grid-template-columns: minmax(0, 1fr) 320px;
  gap: 16px;
}
.sr-main {
  display: grid;
  gap: 14px;
}
.sr-aside {
  display: grid;
  gap: 14px;
}

.sr-toolbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;
  flex-wrap: wrap;
}

.sr-search {
  flex: 1 1 420px;
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px 14px;
  background: var(--panel, #f7f9fc);
  border: 1px solid var(--border, #e6e8ef);
  border-radius: 16px;
}
.sr-search-icon {
  font-size: 18px;
  opacity: 0.7;
}
.sr-search-input {
  width: 100%;
  border: 0;
  background: transparent;
  outline: none;
  font-size: 16px;
  line-height: 22px;
  color: var(--text, #0f172a);
}
/* ===== Filter chips ===== */
.sr-filters {
  display: flex;
  align-items: center;
  gap: 12px;
  flex: 0 0 auto;
}

.sr-chip {
  --chip-bg: #fff;
  --chip-br: #e6e8ef;
  --chip-fg: #0f172a;

  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-height: 44px;
  padding: 10px 18px;
  border-radius: 9999px;
  border: 1px solid var(--chip-br);
  background: var(--chip-bg);
  color: var(--chip-fg);
  font-size: 16px;
  font-weight: 600; /* keep constant to avoid jump */
  line-height: 1;
  letter-spacing: 0.2px;
  cursor: pointer;
  user-select: none;
  transition: background-color 0.15s ease, color 0.15s ease,
    border-color 0.15s ease, box-shadow 0.15s ease;
}
.sr-chip:hover {
  background: #f3f6ff;
  border-color: #c7d2fe;
}
.sr-chip.active {
  --chip-bg: var(--primary, #3b82f6);
  --chip-br: var(--primary, #3b82f6);
  --chip-fg: #fff;
  box-shadow: 0 1px 2px rgba(59, 130, 246, 0.25);
}

.sr-list {
  display: grid;
  gap: 14px;
}
.sr-route-card {
  border: 1px solid var(--border, #e6e8ef);
  border-radius: 16px;
  padding: 18px;
  background: var(--panel, #fff);
}

.sr-route-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  margin-bottom: 12px;
}
.sr-route-head-left {
  display: flex;
  align-items: center;
  gap: 10px;
}
.sr-route-title {
  font-size: 22px;
  font-weight: 700;
}
.sr-arrow {
  opacity: 0.6;
}
.sr-route-head-actions {
  display: inline-flex;
  align-items: center;
  gap: 10px;
}
.sr-icon-btn {
  width: 34px;
  height: 34px;
  display: grid;
  place-items: center;
  border-radius: 10px;
  border: 1px solid var(--border, #e6e8ef);
  background: #fff;
  font-size: 18px;
  line-height: 1;
  cursor: pointer;
  transition: box-shadow 0.15s ease, transform 0.04s ease;
}
.sr-icon-btn:hover {
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.08);
}
.sr-icon-btn:active {
  transform: translateY(1px);
}
.sr-meta {
  display: flex;
  flex-wrap: wrap;
  gap: 16px 22px;
  align-items: center;
  margin-bottom: 16px;
}
.sr-meta-item {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  font-size: 15px;
  color: #374151;
}

.sr-tag {
  margin-left: auto;
  padding: 6px 10px;
  border-radius: 9999px;
  color: #fff;
  font-weight: 700;
  font-size: 12px;
  white-space: nowrap;
}
.sr-tag.is-fastest {
  background: linear-gradient(90deg, #2563eb, #6366f1);
}
.sr-tag.is-shortest {
  background: #22c55e;
}
.sr-tag.is-other {
  background: #ef4444;
}
/* buttons row */
.sr-actions {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
}

.sr-card {
  border: 1px solid var(--border, #e6e8ef);
  border-radius: 16px;
  background: #fff;
  padding: 16px 18px;
}
.sr-card-title {
  font-size: 20px;
  font-weight: 800;
  margin: 0 0 10px;
}
.sr-kv,
.sr-kv-sm {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 8px 0;
}
.sr-kv strong,
.sr-kv-sm strong {
  font-weight: 800;
}
.sr-muted {
  color: #6b7280;
  font-size: 14px;
}
.sr-empty {
  width: 100%;
  min-height: 220px;
  display: grid;
  place-items: center;
  color: #6b7280;
  border: 1px dashed #e6e8ef;
  background: #fbfdff;
  border-radius: 16px;
}

/* Responsive */
@media (max-width: 960px) {
  .sr-grid {
    grid-template-columns: 1fr;
  }
}

/* Dark theme */
.app[data-theme="dark"] .sr-title {
  color: #e5e7eb;
}
.app[data-theme="dark"] .sr-toolbar {
  background: #111827;
  border-color: #374151;
  color: #e5e7eb;
}
.app[data-theme="dark"] .sr-search {
  background: #0f172a;
  border-color: #374151;
}
.app[data-theme="dark"] .sr-chip {
  background: #0b1220;
  color: #e5e7eb;
  border-color: #334155;
}
.app[data-theme="dark"] .sr-chip.active {
  background: #2563eb;
  border-color: #2563eb;
  color: #fff;
}
.app[data-theme="dark"] .sr-route-title {
  color: #e5e7eb;
}
.app[data-theme="dark"] .sr-meta-item {
  color: #cbd5e1;
}

/* ===== Report Incident Form (rif-*) ===== */

.rif-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.rif-header-left {
  display: flex;
  align-items: center;
  gap: 8px;
}
.rif-brand {
  color: var(--waze-blue, #2563eb);
}
.rif-icon-btn {
  border: 0;
  background: transparent;
  font-size: 18px;
  cursor: pointer;
}

.rif-type-grid {
  margin-top: 6px;
  margin-bottom: 10px;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
}
.rif-type-btn {
  display: flex;
  align-items: center;
  gap: 8px;
  justify-content: flex-start;
  padding: 10px 12px;
  border-radius: 10px;
  border: 1px solid #e5e7eb;
  background: #fff;
  cursor: pointer;
}
.rif-type-btn.is-active {
  border-color: var(--waze-blue, #2563eb);
  background: var(--waze-light-blue, #eff6ff);
}
.rif-type-icon {
  font-size: 18px;
}

.rif-form {
}

.rif-row {
  display: flex;
  gap: 8px;
}

.rif-input--full {
  margin-top: 8px;
}
.rif-textarea {
  height: 120px;
  resize: vertical;
}

.rif-gps-btn {
  padding: 10px 12px;
  border-radius: 8px;
  border: 1px solid var(--waze-blue, #2563eb);
  background: var(--waze-light-blue, #eff6ff);
  color: var(--waze-blue, #2563eb);
  cursor: pointer;
}

.rif-upload {
  display: grid;
  place-items: center;
  height: 160px;
  border: 2px dashed #cbd5e1;
  border-radius: 8px;
  background: #f8fafc;
  cursor: pointer;
}
.rif-upload-preview {
  width: 100%;
  height: 160px;
  object-fit: cover;
  border-radius: 8px;
}
.rif-upload-placeholder {
  color: #6b7280;
}

.rif-footer {
  display: flex;
  gap: 8px;
  justify-content: flex-end;
  margin-top: 12px;
}

/* Dark theme support */

.app[data-theme="dark"] .rif-label {
  color: #cbd5e1;
}

.app[data-theme="dark"] .rif-upload {
  background: #0b1220;
  border-color: #334155;
}

/* ===== Report Incident Submit (ris-*) ===== */

.ris-title {
  margin: 12px 0 6px;
  font-size: 20px;
  font-weight: 700;
  color: #111827;
}
.ris-text {
  margin: 0;
  color: #4b5563;
  font-size: 14px;
}
.ris-close {
  position: absolute;
  top: 10px;
  right: 10px;
  border: 0;
  background: transparent;
  font-size: 18px;
  cursor: pointer;
  color: #6b7280;
}

/* Dark theme */
.app[data-theme="dark"] .ris-card {
  background: #111827;
  color: #e5e7eb;
}
.app[data-theme="dark"] .ris-title {
  color: #e5e7eb;
}
.app[data-theme="dark"] .ris-text {
  color: #cbd5e1;
}
.app[data-theme="dark"] .ris-close {
  color: #94a3b8;
}

/* ===== Side Menu (sm-*) ===== */
.sm-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.35);
  z-index: 1999;
}

.sm-drawer {
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 340px;
  background: #fff;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
  transform: translateX(-110%);
  transition: transform 0.25s ease;
  z-index: 2000;
  overflow: auto;
  -webkit-overflow-scrolling: touch;
}
.sm-drawer.open {
  transform: translateX(0);
}

.sm-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 14px 16px;
  border-bottom: 1px solid #e5e7eb;
}
.sm-brand {
  display: flex;
  align-items: center;
  gap: 8px;
  font-weight: 700;
  font-size: 18px;
}
.sm-brand-icon {
  font-size: 22px;
}
.sm-icon-btn {
  border: 0;
  background: transparent;
  font-size: 18px;
  cursor: pointer;
}

.sm-section {
  padding: 14px 16px;
}
.sm-section-label {
  font-size: 12px;
  font-weight: 700;
  color: #6b7280;
  letter-spacing: 0.4px;
  margin-bottom: 10px;
}

.sm-pill-row {
  display: grid;
  gap: 12px;
}
.sm-pill {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  width: 100%;
  padding: 12px 16px;
  border-radius: 9999px;
  font-weight: 600;
  border: 1.5px solid #111827;
  background: #fff;
  color: #111827;
  cursor: pointer;
}
.sm-pill.is-active {
  background: var(--waze-blue, #2563eb);
  color: #fff;
  border-color: var(--waze-blue, #2563eb);
  box-shadow: inset 0 0 0 1.5px rgba(255, 255, 255, 0.35);
}
.sm-pill-icon {
  font-size: 18px;
}

.sm-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 14px 16px;
  border-top: 1px solid #f1f5f9;
  cursor: pointer;
}
.sm-row-text {
  font-size: 16px;
}
.sm-caret {
  color: #9ca3af;
}

/* Dark theme */
.app[data-theme="dark"] .sm-drawer {
  background: #111827;
  color: #e5e7eb;
}
.app[data-theme="dark"] .sm-header {
  border-color: #374151;
}
.app[data-theme="dark"] .sm-pill {
  background: #0b1220;
  color: #e5e7eb;
  border-color: #334155;
}
.app[data-theme="dark"] .sm-pill.is-active {
  background: #2563eb;
  border-color: #2563eb;
  color: #fff;
}
.app[data-theme="dark"] .sm-row {
  border-color: #334155;
}

/* ===== Notifications & Settings (ns-*) ===== */
.ns-page {
  padding: 16px;
  max-width: 1200px;
  margin: 0 auto;
}
.ns-titlebar {
  margin-bottom: 8px;
}
.ns-title {
  margin: 0;
  font-size: 28px;
  font-weight: 800;
  color: #111827;
}
.ns-title-icon {
  font-size: 28px;
  margin-right: 8px;
  color: #a855f7;
}
.ns-subtitle {
  margin: 4px 0 0;
  color: #6b7280;
}

.ns-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
  margin-top: 10px;
}
.ns-col {
  display: grid;
  gap: 16px;
}

.ns-card {
  background: #fff;
  border: 1px solid #e5e7eb;
  border-radius: 12px;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.04);
}
.ns-card-head {
  padding: 12px 14px;
  border-bottom: 1px solid #e5e7eb;
}
.ns-card-title {
  display: flex;
  align-items: center;
  gap: 8px;
  font-weight: 800;
}
.ns-card-icon {
  font-size: 18px;
}
.ns-card-body {
  padding: 10px 14px;
  display: grid;
  gap: 10px;
}

.ns-li {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 10px;
  border: 1px solid #e5e7eb;
  border-radius: 10px;
  background: #fff;
}
.ns-li-left {
  display: flex;
  align-items: flex-start;
  gap: 10px;
}
.ns-li-icon {
  font-size: 18px;
  margin-top: 2px;
}
.ns-li-title {
  font-weight: 700;
  color: #111827;
}
.ns-li-desc {
  font-size: 13px;
  color: #6b7280;
}
.ns-li-right {
  display: flex;
  align-items: center;
}

.ns-field {
  display: grid;
  gap: 8px;
  padding: 10px;
  border: 1px solid #e5e7eb;
  border-radius: 10px;
  background: #fff;
}
.ns-field-label {
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-weight: 600;
}
.ns-field-hint {
  font-size: 12px;
  color: #6b7280;
}

.ns-range {
  width: 100%;
}
.ns-range-scale {
  display: flex;
  justify-content: space-between;
  font-size: 12px;
  color: #6b7280;
  margin-top: 2px;
}

.ns-switch {
  position: relative;
  width: 46px;
  height: 26px;
  border-radius: 9999px;
  background: #e5e7eb;
  border: 1px solid #d1d5db;
  cursor: pointer;
  transition: all 0.2s;
}
.ns-switch .ns-switch-knob {
  position: absolute;
  top: 2px;
  left: 2px;
  width: 22px;
  height: 22px;
  border-radius: 50%;
  background: #fff;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);
  transition: left 0.2s;
}
.ns-switch.is-on {
  background: #2563eb;
  border-color: #2563eb;
}
.ns-switch.is-on .ns-switch-knob {
  left: 22px;
}

/* Responsive */
@media (max-width: 1000px) {
  .ns-grid {
    grid-template-columns: 1fr;
  }
}

/* Dark theme */
.app[data-theme="dark"] .ns-title {
  color: #e5e7eb;
}
.app[data-theme="dark"] .ns-subtitle {
  color: #cbd5e1;
}
.app[data-theme="dark"] .ns-card {
  background: #111827;
  border-color: #374151;
}
.app[data-theme="dark"] .ns-li,
.app[data-theme="dark"] .ns-field {
  background: #0f172a;
  border-color: #374151;
}
.app[data-theme="dark"] .ns-li-title {
  color: #e5e7eb;
}
.app[data-theme="dark"] .ns-li-desc,
.app[data-theme="dark"] .ns-field-hint {
  color: #94a3b8;
}

.app[data-theme="dark"] .ns-switch {
  background: #334155;
  border-color: #334155;
}
.app[data-theme="dark"] .ns-range-scale {
  color: #94a3b8;
}

/* Page switcher - keep components mounted, just hide the inactive ones */
.app .page {
  display: none;
}
.app .page.is-active {
  display: block;
}

/* prevent inactive pages from catching clicks while still mounted */
.app .page:not(.is-active) {
  pointer-events: none;
}

/* ===== Search Planner (sb- / sbm- *) ===== */

.sb-launch {
  display: flex;
  justify-content: flex-end;
  padding: 8px 12px;
}

.sb-open-ico {
  font-size: 16px;
}

/* modal */
.sbm-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.35);
  z-index: 60;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 16px;
}
.sbm-card {
  width: 100%;
  max-width: 640px;
  background: #fff;
  color: #111827;
  border-radius: 18px;
  border: 1px solid #e5e7eb;
  box-shadow: 0 20px 50px rgba(0, 0, 0, 0.2);
  padding: 18px;
}
.sbm-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 8px;
}
.sbm-title {
  display: flex;
  align-items: center;
  gap: 10px;
}
.sbm-title h3 {
  margin: 0;
  font-size: 28px;
}
.sbm-title-ico {
  font-size: 22px;
  color: #2563eb;
}
.sbm-close {
  border: 0;
  background: transparent;
  font-size: 20px;
  cursor: pointer;
  color: #6b7280;
}

.sbm-form {
  display: grid;
  gap: 10px;
}

.sbm-row {
  position: relative;
  display: flex;
  align-items: center;
  gap: 8px;
}
.sbm-icon-inline {
  position: absolute;
  right: 12px;
  pointer-events: none;
  color: #6b7280;
}

.sbm-recurring {
  margin-top: 8px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: #f8fafc;
  border: 1px solid #e5e7eb;
  border-radius: 14px;
  padding: 12px 14px;
}
.sbm-rec-left {
  display: flex;
  align-items: center;
  gap: 10px;
}
.sbm-rec-ico {
  font-size: 20px;
}
.sbm-rec-title {
  font-weight: 700;
}

/* switch */
.sbm-switch {
  position: relative;
  width: 50px;
  height: 28px;
  border-radius: 9999px;
  background: #e5e7eb;
  border: 1px solid #d1d5db;
  cursor: pointer;
}
.sbm-switch-knob {
  position: absolute;
  top: 2px;
  left: 2px;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background: #fff;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);
  transition: left 0.2s;
}
.sbm-switch.is-on {
  background: #2563eb;
  border-color: #2563eb;
}
.sbm-switch.is-on .sbm-switch-knob {
  left: 24px;
}

/* actions */
.sbm-actions {
  display: flex;
  justify-content: flex-end;
  gap: 10px;
  margin-top: 6px;
}

.sbm-btn-ico {
  margin-right: 8px;
}

/* dark theme */
.app[data-theme="dark"] .sb-open-btn {
  background: #2563eb;
  border-color: #2563eb;
}

.app[data-theme="dark"] .sbm-recurring {
  background: #0b1220;
  border-color: #334155;
}

/* Disabled pills (guest) */
.sm-pill.is-disabled {
  opacity: 0.45;
  cursor: not-allowed;
  border-color: #cbd5e1;
  color: #6b7280;
  background: #f3f4f6;
}
.app[data-theme="dark"] .sm-pill.is-disabled {
  background: #0b1220;
  border-color: #334155;
  color: #64748b;
  opacity: 0.6;
}

/* Guest promo card */
.sm-guest-card {
  margin: 12px 16px 18px;
  padding: 14px;
  background: #ffffff;
  border: 1px solid #e5e7eb;
  border-radius: 14px;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.04);
}
.sm-guest-title {
  display: flex;
  align-items: center;
  gap: 8px;
  font-weight: 800;
  margin-bottom: 6px;
}
.sm-guest-text {
  color: #6b7280;
  font-size: 14px;
  margin: 0 0 10px;
}

.app[data-theme="dark"] .sm-guest-card {
  background: #111827;
  border-color: #374151;
}
.app[data-theme="dark"] .sm-guest-text {
  color: #cbd5e1;
}

/* demo role chips */
.role-toggle {
  margin-left: 4px;
}
/* role chips */
.role-chip {
  padding: 6px 12px;
  border-radius: 9999px;
  border: 1px solid #e5e7eb;
  background: #fff;
  font-weight: 800;
  cursor: pointer;
}

/* active state (guest/user) */
.role-chip[aria-pressed="true"] {
  background: #2563eb;
  color: #fff;
  border-color: #2563eb;
}

/* admin has its own color when active */
.role-chip[data-role="admin"][aria-pressed="true"] {
  background: #ef4444; /* red */
  border-color: #ef4444;
}

/* dark theme */
.app[data-theme="dark"] .role-chip {
  background: #0b1220;
  border-color: #334155;
  color: #e5e7eb;
}

/* ===== Create Account Modal (cam-*) ===== */

.cam-h-ico {
  font-size: 22px;
  color: #2563eb;
}

.cam-learn-ico {
  font-size: 16px;
}

/* ===== Account Created Modal (acm-*) ===== */

.acm-close {
  position: absolute;
  top: 10px;
  right: 10px;
  border: 0;
  background: transparent;
  font-size: 18px;
  color: #6b7280;
  cursor: pointer;
}
.acm-title {
  margin: 12px 0 4px;
  font-size: 20px;
  font-weight: 800;
  color: #111827;
}
.acm-text {
  margin: 0 0 14px;
  color: #4b5563;
}

/* Dark theme */

.app[data-theme="dark"] .acm-title {
  color: #e5e7eb;
}
.app[data-theme="dark"] .acm-text {
  color: #cbd5e1;
}

/* ===== Create User Learn More (culm-*) ===== */
.culm-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.35);
  z-index: var(--z-overlay); /* same as other modals so it sits on top */
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 12px;
}
.culm-card {
  position: relative;
  width: 100%;
  max-width: 700px;
  background: #fff;
  border: 1px solid #e5e7eb;
  border-radius: 18px;
  box-shadow: 0 20px 50px rgba(0, 0, 0, 0.2);
  padding: 18px;
}
.culm-close {
  position: absolute;
  top: 10px;
  right: 10px;
  border: 0;
  background: transparent;
  font-size: 18px;
  color: #6b7280;
  cursor: pointer;
}
.culm-titlebar {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 8px;
}
.culm-q {
  font-size: 22px;
  color: #2563eb;
}
.culm-title {
  margin: 0;
  font-size: 24px;
  font-weight: 800;
  color: #111827;
}

.culm-list {
  list-style: none;
  padding: 6px 0 12px;
  margin: 0;
  display: grid;
  gap: 14px;
}
.culm-item {
  display: flex;
  align-items: center;
  gap: 12px;
}
.culm-ico {
  font-size: 22px;
  width: 26px;
  text-align: center;
}
.culm-text {
  color: #111827;
}

.culm-btn {
  width: 100%;
  padding: 12px 14px;
  border-radius: 12px;
  cursor: pointer;
  border: 1px solid #2563eb;
  background: #2563eb;
  color: #fff;
  font-weight: 700;
}

.culm-card.culm-card--full {
  width: 100vw;
  max-width: 100vw;
  height: 100vh;
  max-height: 100vh;
  border-radius: 0;
  padding: 22px 18px 28px;
  overflow: auto;
}

/* Dark theme */
.app[data-theme="dark"] .culm-card {
  background: #111827;
  border-color: #374151;
}
.app[data-theme="dark"] .culm-title,
.app[data-theme="dark"] .culm-text {
  color: #e5e7eb;
}

/* ===== Admin Side Menu (adm-*) ===== */
.adm-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.35);
  z-index: 1998;
}
.adm-drawer {
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 340px;
  background: #fff;
  color: #111827;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
  transform: translateX(-110%);
  transition: transform 0.25s ease;
  z-index: 1999;
  overflow: auto;
  -webkit-overflow-scrolling: touch;
}
.adm-drawer.open {
  transform: translateX(0);
}

.adm-section {
  padding: 14px 16px;
}
.adm-title {
  font-size: 14px;
  font-weight: 800;
  color: #6b7280;
  letter-spacing: 0.4px;
  text-transform: uppercase;
  margin-bottom: 12px;
}

.adm-pill-row {
  display: grid;
  gap: 14px;
}
.adm-pill {
  display: flex;
  align-items: center;
  gap: 12px;
  width: 100%;
  padding: 12px 18px;
  border-radius: 9999px;
  font-weight: 700;
  cursor: pointer;
  justify-content: flex-start;
  border: 1.5px solid #111827;
  background: #fff;
  color: #111827;
}
.adm-pill.is-primary {
  background: #f87171;
  border-color: #f87171;
  color: #fff; /* coral/red highlight */
}
.adm-pill.is-outline {
  background: #fff;
  border-color: #111827;
  color: #111827;
}
.adm-ico {
  font-size: 18px;
  width: 26px;
  text-align: center;
}

/* Hover/focus states */
.adm-pill:focus-visible {
  outline: 2px solid #2563eb;
  outline-offset: 2px;
}
.adm-pill.is-outline:hover {
  background: #f8fafc;
}
.adm-pill.is-primary:hover {
  filter: brightness(0.96);
}

/* Dark theme support */
.app[data-theme="dark"] .adm-drawer {
  background: #111827;
  color: #e5e7eb;
}
.app[data-theme="dark"] .adm-pill.is-outline {
  background: #0b1220;
  border-color: #334155;
  color: #e5e7eb;
}

/* ===== Admin Dashboard (ad-*) ===== */
.ad-wrap {
  padding: 16px;
}
.ad-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 16px;
}
.ad-h-icon {
  font-size: 26px;
  width: 46px;
  height: 46px;
  display: grid;
  place-items: center;
  background: #fee2e2;
  color: #ef4444;
  border-radius: 12px;
}
.ad-h-title {
  margin: 0;
  font-size: 28px;
}
.ad-h-sub {
  margin: 2px 0 0;
  color: #6b7280;
  font-size: 13px;
}

.ad-kpis {
  display: grid;
  grid-template-columns: repeat(4, minmax(0, 1fr));
  gap: 14px;
  margin-bottom: 16px;
}
.ad-kpi {
  background: #fff;
  border: 1px solid #e5e7eb;
  border-radius: 12px;
  padding: 14px;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.04);
}
.ad-kpi-label {
  color: #6b7280;
  font-size: 13px;
}
.ad-kpi-value {
  font-size: 26px;
  font-weight: 800;
  margin-top: 4px;
}
.ad-kpi-delta {
  margin-top: 6px;
  font-size: 12px;
  display: flex;
  align-items: center;
  gap: 6px;
}
.ad-kpi-delta.up {
  color: #16a34a;
}
.ad-kpi-delta.down {
  color: #ef4444;
}

.ad-grid {
  display: grid;
  gap: 16px;
  grid-template-columns: 1fr 1fr;
}
.ad-card {
  background: #fff;
  border: 1px solid #e5e7eb;
  border-radius: 12px;
  padding: 14px;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.04);
}
.ad-card-title {
  display: flex;
  align-items: center;
  gap: 10px;
  font-weight: 800;
  margin-bottom: 8px;
}
.ad-ico {
  font-size: 20px;
}
.ad-subtitle {
  margin: 10px 0 8px;
  font-weight: 700;
  color: #374151;
  font-size: 14px;
}

.ad-badges {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}
.ad-badge {
  padding: 6px 10px;
  border-radius: 9999px;
  font-size: 12px;
  border: 1px solid transparent;
  background: #f3f4f6;
  color: #111827;
}
.ad-badge.violet {
  background: #ede9fe;
  border-color: #ddd6fe;
}
.ad-badge.pink {
  background: #ffe4e6;
  border-color: #fecdd3;
}
.ad-badge.amber {
  background: #fef3c7;
  border-color: #fde68a;
}
.ad-badge.green {
  background: #dcfce7;
  border-color: #bbf7d0;
}
.ad-badge.sky {
  background: #e0f2fe;
  border-color: #bae6fd;
}

.ad-scroll {
  max-height: 320px;
  overflow: auto;
  padding-right: 6px;
}
.ad-incident {
  border: 1px solid #e5e7eb;
  border-radius: 10px;
  padding: 12px;
  margin-bottom: 10px;
  background: #fff;
}
.ad-incident-row {
  display: flex;
  align-items: center;
  gap: 8px;
}
.ad-dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: #111827;
  display: inline-block;
}
.ad-incident-road {
  margin: 0;
  font-size: 16px;
}
.ad-incident-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  margin: 6px 0;
}
.ad-tag {
  font-size: 11px;
  padding: 4px 8px;
  border-radius: 9999px;
  background: #f3f4f6;
  color: #111827;
  border: 1px solid #e5e7eb;
}
.ad-tag.pink {
  background: #ffe4e6;
  border-color: #fecdd3;
}
.ad-tag.red {
  background: #fee2e2;
  border-color: #fecaca;
}
.ad-tag.amber {
  background: #fef3c7;
  border-color: #fde68a;
}
.ad-tag.slate {
  background: #f3f4f6;
}

.ad-incident-desc {
  margin: 0;
  color: #4b5563;
  font-size: 13px;
}
.ad-incident-time {
  margin-top: 8px;
  font-size: 12px;
  color: #6b7280;
}

.ad-userlist {
  list-style: none;
  padding: 0;
  margin: 0 0 6px;
  display: grid;
  gap: 10px;
}
.ad-user {
  display: flex;
  align-items: center;
  gap: 12px;
  border: 1px solid #e5e7eb;
  border-radius: 10px;
  padding: 10px;
}
.ad-avatar {
  width: 36px;
  height: 36px;
  border-radius: 9999px;
  display: grid;
  place-items: center;
  background: #eef2ff;
  color: #3730a3;
  font-weight: 800;
}
.ad-avatar.ad-rank {
  background: #fee2e2;
  color: #991b1b;
}
.ad-user-main {
  flex: 1;
  min-width: 0;
}
.ad-user-name {
  font-weight: 700;
}
.ad-user-email {
  color: #6b7280;
  font-size: 13px;
  overflow: hidden;
  text-overflow: ellipsis;
}

.ad-pill {
  font-size: 12px;
  padding: 6px 10px;
  border-radius: 9999px;
  background: #f3f4f6;
  border: 1px solid #e5e7eb;
}
.ad-pill.green {
  background: #dcfce7;
  border-color: #bbf7d0;
}

/* Responsive */
@media (max-width: 1000px) {
  .ad-kpis {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
  .ad-grid {
    grid-template-columns: 1fr;
  }
}

/* Dark theme */
.app[data-theme="dark"] .ad-kpi,
.app[data-theme="dark"] .ad-card,
.app[data-theme="dark"] .ad-incident,
.app[data-theme="dark"] .ad-user {
  background: #111827;
  border-color: #374151;
  color: #e5e7eb;
}
.app[data-theme="dark"] .ad-h-sub,
.app[data-theme="dark"] .ad-incident-desc,
.app[data-theme="dark"] .ad-user-email {
  color: #cbd5e1;
}
.app[data-theme="dark"] .ad-badge,
.app[data-theme="dark"] .ad-tag,
.app[data-theme="dark"] .ad-pill {
  border-color: #334155;
}

/* Guest promo: sign-in row */
.sm-guest-sub {
  margin-top: 10px;
  text-align: center;
  font-size: 13px;
  color: #4b5563;
}
.sm-guest-link {
  background: none;
  border: 0;
  padding: 0;
  margin: 0;
  color: #2563eb;
  text-decoration: underline;
  font-weight: 700;
  cursor: pointer;
}
.sm-guest-link:focus-visible {
  outline: 2px solid #2563eb;
  border-radius: 4px;
}
.app[data-theme="dark"] .sm-guest-sub {
  color: #cbd5e1;
}

/* ===== User Sign In Form (usf-*) ===== */

.usf-ico {
  font-size: 22px;
  color: #2563eb;
}

/* ===== User Sign In Success (uss-*) ===== */

.uss-close {
  position: absolute;
  top: 10px;
  right: 10px;
  border: 0;
  background: transparent;
  font-size: 18px;
  color: #6b7280;
  cursor: pointer;
}
.uss-title {
  margin: 12px 0 6px;
  font-size: 20px;
  font-weight: 800;
  color: #111827;
}
.uss-text {
  margin: 0 0 14px;
  color: #4b5563;
}

/* === Button polish (global) ======================================= */
/* sensible defaults & smooth animations */
button {
  border-radius: 10px; /* unify corners */
  transition: box-shadow 0.18s ease, transform 0.12s ease,
    background-color 0.18s ease, border-color 0.18s ease, color 0.18s ease;
  will-change: box-shadow, transform;
}

/* grey hover shadow (opt-out for disabled) */
button:not(:disabled):hover {
  /* light/dark-friendly neutral grey shadow */
  box-shadow: 0 8px 22px rgba(0, 0, 0, 0.18);
  transform: translateY(-1px);
}

/* pressed state */
button:not(:disabled):active {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.22);
  transform: translateY(0);
}

/* accessible focus ring (consistent across app) */
button:focus-visible {
  outline: 3px solid rgba(66, 133, 244, 0.6); /* bluish halo */
  outline-offset: 2px;
  box-shadow: 0 0 0 3px rgba(66, 133, 244, 0.25);
}

/* darker shadow in dark mode so it still reads as "grey" */
.app[data-theme="dark"] button:not(:disabled):hover {
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.35);
}
.app[data-theme="dark"] button:not(:disabled):active {
  box-shadow: 0 4px 14px rgba(0, 0, 0, 0.4);
}

/* respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  button {
    transition: none;
  }
}

/* ===== Standardised layer (drop at end of file) ===================== */
/* Tokens */
:root {
  --color-blue: #2563eb;
  --color-border: #e5e7eb;
  --color-bg: #fff;
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 16px;
  --shadow-lg: 0 20px 50px rgba(0, 0, 0, 0.2);
  --shadow-md: 0 10px 30px rgba(0, 0, 0, 0.15);
  --font-base: Georgia, "Times New Roman", Times, serif;
}

/* Global font + ensure form controls inherit it */
html,
body,
.app {
  font-family: var(--font-base);
}
button,
input,
select,
textarea {
  font: inherit;
}

/* Inputs (unifies cam/usf/sbm/rif/ns) */
.cam-input,
.usf-input,
.sbm-input,
.rif-input,
.ns-select {
  width: 100%;
  box-sizing: border-box;
  padding: 12px 14px;
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  background: var(--color-bg);
  font-size: 14px;
}

/* Labels */
.cam-label,
.usf-label,
.sbm-label,
.rif-label {
  font-weight: 800;
  color: #111827;
  margin-top: 8px;
}

/* Inline errors */
.cam-error,
.usf-error {
  color: #dc2626;
  font-size: 13px;
}

/* Buttons (base) */
.cam-btn,
.usf-btn,
.sbm-btn,
.rif-btn,
.sr-btn {
  padding: 12px 14px;
  border-radius: var(--radius-md);
  font-weight: 700;
  cursor: pointer;
}

/* Primary (blue) buttons — includes “login”, success, guest CTA, etc. */
.cam-btn-primary,
.usf-btn-primary,
.sbm-btn-primary,
xf .rif-btn--primary,
.sr-btn-primary,
.acm-login,
.uss-btn,
.sm-guest-cta,
.sb-open-btn {
  border: 1px solid var(--color-blue);
  background: var(--color-blue);
  color: #fff;
}

.sm-guest-cta {
  align-items: center;
  justify-content: center;
  display: block;
  width: max-content;
  margin: 12px auto 8px;
  align-self: center;
  justify-self: center;
}

/* Ghost buttons */
.cam-btn-ghost,
.sbm-btn-ghost,
.rif-btn--ghost,
.sr-btn-ghost {
  border: 1px solid var(--color-border);
  background: #fff;
  color: inherit;
}

/* Icon-only utility buttons (close / icon-btns) */
.rif-icon-btn,
.acm-close,
.uss-close,
.usf-close,
.cam-close {
  border: 0;
  background: transparent;
  cursor: pointer;
}

/* Backdrops (keep individual z-indexes where set earlier) */
.cam-backdrop,
.usf-backdrop,
.uss-backdrop,
.acm-backdrop,
.ris-backdrop,
.rif-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.35);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: var(--z-overlay);
}

.usf-backdrop,
.uss-backdrop,
.acm-backdrop,
.ris-backdrop,
.rif-backdrop {
  padding: 12px;
}
/* Modal cards/panels */
.cam-card,
.usf-card,
.uss-card,
.acm-card,
.ris-card,
.rif-card {
  position: relative;
  background: var(--color-bg);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-lg);
  width: min(92vw, 560px);
  max-height: min(86vh, 680px);
  overflow: auto;
  padding: 22px 24px 20px;
  box-sizing: border-box;
  z-index: var(--z-overlay-card);
}

/* Dark theme: inputs & selects */
.app[data-theme="dark"] .cam-input,
.app[data-theme="dark"] .usf-input,
.app[data-theme="dark"] .sbm-input,
.app[data-theme="dark"] .rif-input,
.app[data-theme="dark"] .ns-select {
  background: #0f172a;
  border-color: #374151;
  color: #e5e7eb;
}

/* Dark theme: cards/panels (and saved-route cards) */
.app[data-theme="dark"] .cam-card,
.app[data-theme="dark"] .usf-card,
.app[data-theme="dark"] .uss-card,
.app[data-theme="dark"] .acm-card,
.app[data-theme="dark"] .rif-card,
.app[data-theme="dark"] .sbm-card,
.app[data-theme="dark"] .sr-card,
.app[data-theme="dark"] .sr-route-card {
  background: #111827;
  border-color: #374151;
  color: #e5e7eb;
  box-shadow: 0 22px 55px rgba(0, 0, 0, 0.55);
}

/* Dark theme: ghost buttons */
.app[data-theme="dark"] .cam-btn-ghost,
.app[data-theme="dark"] .sbm-btn-ghost,
.app[data-theme="dark"] .rif-btn--ghost,
.app[data-theme="dark"] .sr-btn-ghost {
  background: #0b1220;
  border-color: #334155;
  color: #e5e7eb;
}

/* (from your earlier polish) consistent hover/press shadows */
button {
  border-radius: 10px;
  transition: box-shadow 0.18s, transform 0.12s, background-color 0.18s,
    border-color 0.18s, color 0.18s;
  will-change: box-shadow, transform;
}
button:not(:disabled):hover {
  box-shadow: 0 8px 22px rgba(0, 0, 0, 0.18);
  transform: translateY(-1px);
}
button:not(:disabled):active {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.22);
  transform: none;
}
.app[data-theme="dark"] button:not(:disabled):hover {
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.35);
}
.app[data-theme="dark"] button:not(:disabled):active {
  box-shadow: 0 4px 14px rgba(0, 0, 0, 0.4);
}

/* Header layout (icon + title) */
.cam-header,
.usf-header {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 12px;
}

.cam-title,
.usf-title {
  margin: 0;
  line-height: 1.2;
  font-size: 28px;
}

/* Form vertical rhythm */
.cam-form,
.usf-form {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* Nicer focus for inputs inside these cards */
.cam-input:focus,
.usf-input:focus {
  outline: none;
  border-color: var(--color-blue);
  box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.15);
}

.cam-close,
.usf-close {
  position: absolute;
  top: 10px;
  right: 10px;
  border: 0;
  background: transparent;
  font-size: 18px; /* or 20px if you prefer bigger */
  color: #6b7280;
  cursor: pointer;
}

/* === Welcome Gate ================================================== */
.gate-backdrop {
  position: fixed;
  inset: 0;
  z-index: 99995;
  background: rgba(0, 0, 0, 0.45);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 16px;
}
.gate-card {
  width: min(92vw, 420px);
  background: var(--color-bg);
  border: 1px solid var(--color-border);
  border-radius: 16px;
  box-shadow: 0 24px 60px rgba(0, 0, 0, 0.25);
  padding: 24px 22px 20px;
  position: relative;
}
.gate-close {
  position: absolute;
  top: 10px;
  right: 12px;
  border: 0;
  background: transparent;
  color: #9ca3af;
  cursor: not-allowed;
  opacity: 0.4; /* gate must be completed; close disabled */
}
.gate-logo {
  width: 64px;
  height: 64px;
  border-radius: 9999px;
  background: rgba(37, 99, 235, 0.12);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 32px;
  margin: 6px auto 8px;
}
.gate-title {
  margin: 4px 0 0;
  text-align: center;
  font-size: 24px;
  font-weight: 800;
}
.gate-sub {
  text-align: center;
  color: #6b7280;
  margin: 4px 0 16px;
}

.gate-form {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.gate-signup {
  text-align: center;
  margin: 10px 0 8px;
  color: #6b7280;
}
.gate-link {
  border: 0;
  background: transparent;
  color: #2563eb;
  font-weight: 700;
  cursor: pointer;
  text-decoration: underline;
}

.gate-divider {
  display: flex;
  align-items: center;
  gap: 12px;
  margin: 12px 0;
  color: #9ca3af;
  font-weight: 700;
  letter-spacing: 0.02em;
}
.gate-divider::before,
.gate-divider::after {
  content: "";
  height: 1px;
  background: var(--color-border);
  flex: 1;
}

.gate-guest-btn {
  width: 100%;
  padding: 12px 14px;
  border-radius: 12px;
  border: 1px solid var(--color-border);
  background: #fff;
  font-weight: 700;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}
.gate-guest-ico {
  font-size: 18px;
  line-height: 1;
}

.app[data-theme="dark"] .gate-card {
  background: #111827;
  border-color: #374151;
  color: #e5e7eb;
  box-shadow: 0 26px 70px rgba(0, 0, 0, 0.55);
}
.app[data-theme="dark"] .gate-guest-btn {
  background: #0b1220;
  border-color: #334155;
  color: #e5e7eb;
}

/* ===== Side Menu (guest redesign) =============================== */
.sm-backdrop {
  position: fixed;
  inset: 0;
  z-index: 99980;
  background: rgba(0, 0, 0, 0.35);
  display: flex;
  align-items: stretch;
  justify-content: flex-start;
}
.sm-panel {
  width: min(92vw, 420px);
  background: var(--color-bg);
  border-right: 1px solid var(--color-border);
  box-shadow: 0 14px 40px rgba(0, 0, 0, 0.25);
  padding: 16px;
  position: relative;
}
.sm-close {
  position: absolute;
  top: 10px;
  right: 12px;
  background: transparent;
  border: 0;
  font-size: 20px;
  color: #6b7280;
  cursor: pointer;
}
.sm-brand {
  display: flex;
  align-items: center;
  gap: 8px;
  margin: 4px 0 12px;
}
.sm-brand-ico {
  font-size: 24px;
}
.sm-brand-name {
  font-weight: 900;
  font-size: 22px;
}

/* guest header */
.sm-guest-header {
  display: flex;
  gap: 12px;
  align-items: center;
  margin: 6px 0 14px;
}
.sm-guest-avatar {
  width: 44px;
  height: 44px;
  border-radius: 9999px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #eef2ff;
  border: 1px solid #e5e7eb;
  font-size: 20px;
}
.sm-guest-meta {
  display: flex;
  flex-direction: column;
  gap: 6px;
}
.sm-guest-name {
  font-weight: 800;
}
.sm-guest-login {
  width: max-content;
  padding: 4px 8px;
  border-radius: 9999px;
  font-weight: 700;
  border: 1px solid #a7f3d0;
  background: #d1fae5;
  color: #065f46;
}

/* section title */
.sm-section-title {
  margin: 10px 0 8px;
  font-weight: 900;
  letter-spacing: 0.06em;
  text-transform: uppercase;
  color: #6b7280;
}

/* nav list */
.sm-guest-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
}
.sm-guest-item {
  display: flex;
  align-items: center;
  gap: 12px;
  width: 100%;
  text-align: left;
  padding: 14px 16px;
  border: 1px solid var(--color-border);
  border-radius: 16px;
  background: #fff;
  cursor: pointer;
  font-weight: 800;
}
.sm-guest-item-ico {
  width: 20px;
  text-align: center;
}
.sm-guest-item.is-active {
  background: #2563eb;
  color: #fff;
  border-color: #2563eb;
  box-shadow: 0 10px 22px rgba(37, 99, 235, 0.25);
}
.sm-guest-item.is-locked {
  background: #f8fafc;
  color: #6b7280;
  position: relative;
}
.sm-guest-item.is-locked .sm-guest-lock {
  margin-left: auto;
  opacity: 0.9;
}

/* upgrade card */
.sm-upgrade {
  margin-top: 16px;
  padding: 18px;
  border: 1px solid var(--color-border);
  border-radius: 16px;
  background: #fff;
  text-align: center;
  box-shadow: 0 6px 14px rgba(0, 0, 0, 0.05);
}
.sm-upgrade-title {
  font-weight: 900;
  margin-bottom: 12px;
}
.sm-upgrade-cta {
  padding: 10px 14px;
  border-radius: 12px;
  font-weight: 800;
  border: 1px solid var(--color-blue);
  background: var(--color-blue);
  color: #fff;
}

.app[data-theme="dark"] .sm-panel {
  background: #111827;
  border-right-color: #374151;
}
.app[data-theme="dark"] .sm-guest-avatar {
  background: #0b1220;
  border-color: #334155;
}
.app[data-theme="dark"] .sm-guest-login {
  border-color: #065f46;
  background: #064e3b;
  color: #d1fae5;
}
.app[data-theme="dark"] .sm-guest-item {
  background: #0b1220;
  border-color: #334155;
  color: #e5e7eb;
}
.app[data-theme="dark"] .sm-guest-item.is-locked {
  background: #0b1220;
  color: #94a3b8;
}
.app[data-theme="dark"] .sm-upgrade {
  background: #0b1220;
  border-color: #334155;
}

/* Ensure we can absolutely position inside the map wrapper */
.map-wrapper {
  position: relative;
}

/* Floating Theme Toggle (bottom-right) */
.map-fab {
  position: absolute;
  z-index: 99940;
  right: 16px;
  bottom: 16px;
  width: 52px;
  height: 52px;
  border-radius: 9999px;
  border: 1px solid var(--color-border);
  background: var(--color-bg);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 22px;
  cursor: pointer;
  box-shadow: 0 10px 24px rgba(0, 0, 0, 0.18);
  transition: transform 0.15s ease, box-shadow 0.15s ease;
}
.map-fab:hover {
  transform: translateY(-1px);
  box-shadow: 0 14px 30px rgba(0, 0, 0, 0.22);
}
.map-fab:active {
  transform: translateY(0);
}

.app[data-theme="dark"] .map-fab {
  background: #0b1220;
  border-color: #334155;
  color: #e5e7eb;
}

.menu-fab {
  top: 16px;
  left: 16px;
  right: auto;
  bottom: auto;
  width: 48px;
  height: 48px;
}
.theme-fab {
  right: 16px;
  bottom: 16px;
}

.app[data-theme="dark"] .map-fab {
  background: #0b1220;
  border-color: #334155;
  color: #e5e7eb;
}

.map-wrapper {
  position: relative;
}

/* ===== Route Preview Form (rpf-*) ===== */
.rpf-backdrop {
  position: fixed;
  inset: 0;
  z-index: 99990;
  background: rgba(0, 0, 0, 0.45);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 24px;
}
.rpf-card {
  width: min(720px, 92vw);
  background: var(--color-bg);
  border: 1px solid var(--color-border);
  border-radius: 20px;
  box-shadow: 0 24px 80px rgba(0, 0, 0, 0.35);
  padding: 20px 20px 22px;
  position: relative;
}
.rpf-close {
  position: absolute;
  top: 14px;
  right: 16px;
  background: transparent;
  border: 0;
  font-size: 24px;
  color: #6b7280;
  cursor: pointer;
}
.rpf-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 8px;
}
.rpf-ico {
  font-size: 26px;
}
.rpf-title {
  font-weight: 900;
  font-size: 28px;
}

.rpf-form {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-top: 10px;
}
.rpf-label {
  font-weight: 800;
  margin-top: 6px;
}
.rpf-input {
  width: 100%;
  padding: 14px 14px;
  border: 1px solid var(--color-border);
  border-radius: 12px;
  background: var(--color-bg);
  color: inherit;
}
.rpf-input:focus {
  outline: none;
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.25);
}

.rpf-btn {
  width: 100%;
  padding: 14px 16px;
  border-radius: 12px;
  font-weight: 900;
  border: 1px solid var(--color-border);
  background: var(--color-bg);
  cursor: pointer;
}
.rpf-btn-primary {
  background: var(--color-blue);
  color: #fff;
  border-color: var(--color-blue);
  box-shadow: 0 10px 22px rgba(37, 99, 235, 0.25);
}

.rpf-section {
  margin-top: 14px;
}
.rpf-card-inner {
  border: 1px solid var(--color-border);
  border-radius: 16px;
  padding: 16px;
  background: var(--color-bg);
}
.rpf-section-title {
  font-weight: 900;
  font-size: 20px;
  margin-bottom: 12px;
}

.rpf-meta {
  display: flex;
  gap: 18px;
  margin-bottom: 14px;
  color: #374151;
}
.app[data-theme="dark"] .rpf-meta {
  color: #cbd5e1;
}
.rpf-meta-item {
  font-weight: 800;
}

.rpf-alert {
  display: flex;
  gap: 12px;
  align-items: flex-start;
  border: 2px solid #f59e0b;
  background: #fff7ed;
  color: #7c2d12;
  border-radius: 12px;
  padding: 14px;
}
.rpf-alert-ico {
  font-size: 20px;
}
.rpf-alert-title {
  font-weight: 900;
  margin-bottom: 2px;
}
.rpf-alert-text {
  opacity: 0.9;
}

.app[data-theme="dark"] .rpf-alert {
  background: #1f1304;
  border-color: #b45309;
  color: #f59e0b;
}

.rpf-subtitle {
  margin-top: 18px;
  font-weight: 900;
  font-size: 20px;
}
.rpf-search-row {
  margin-top: 10px;
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 6px 8px;
  border: 1px solid var(--color-border);
  border-radius: 9999px;
  background: var(--color-bg);
}
.rpf-search-ico {
  font-size: 18px;
  margin-left: 6px;
}
.rpf-search {
  flex: 1;
  border: 0;
  outline: 0;
  background: transparent;
  padding: 10px 8px;
  color: inherit;
}

.rpf-location-card {
  margin-top: 14px;
  border: 1px solid var(--color-border);
  border-radius: 16px;
  padding: 16px;
  background: var(--color-bg);
}
.rpf-location-title {
  font-weight: 900;
  font-size: 22px;
  margin-bottom: 10px;
}

/* dark tweaks */
.app[data-theme="dark"] .rpf-card {
  background: #0b1220;
  border-color: #334155;
}
.app[data-theme="dark"] .rpf-input {
  background: #0b1220;
  border-color: #334155;
}
.app[data-theme="dark"] .rpf-search-row {
  background: #0b1220;
  border-color: #334155;
}
.app[data-theme="dark"] .rpf-location-card {
  background: #0b1220;
  border-color: #334155;
}

/* ===== Route Preview Bottom Sheet (rps-*) ===== */
.rps-sheet {
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 99950;
  background: var(--sheet-bg, #f5f5f7);
  border-top-left-radius: 22px;
  border-top-right-radius: 22px;
  box-shadow: 0 -10px 40px rgba(0, 0, 0, 0.25);
  padding: 10px 14px 14px;
  /* visual safe-edge */
  border-top: 1px solid var(--color-border);
}
.app[data-theme="dark"] .rps-sheet {
  --sheet-bg: #0b1220;
  border-top-color: #334155;
}

.rps-handle {
  width: 140px;
  height: 12px;
  border-radius: 9999px;
  margin: 10px auto 14px;
  background: #e5e7eb;
  position: relative;
  box-shadow: inset 0 -1px 0 rgba(0, 0, 0, 0.08),
    inset 0 1px 0 rgba(255, 255, 255, 0.6);
}
.app[data-theme="dark"] .rps-handle {
  background: #cbd5e1;
  box-shadow: inset 0 -1px 0 rgba(0, 0, 0, 0.2),
    inset 0 1px 0 rgba(255, 255, 255, 0.15);
}
.rps-handle:active {
  transform: scale(0.98);
}
.rps-handle::before {
  content: "";
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  width: 240px; /* ← hit width */
  height: 36px; /* ← hit height */
  border-radius: 9999px;
  /* no background, just enlarges the pointer hit area */
}

.rps-search-row {
  display: flex;
  align-items: center;
  gap: 10px;
  background: #eae6f1; /* soft purple like your mock */
  border-radius: 9999px;
  padding: 12px 14px;
  cursor: pointer;
  user-select: none;
}
.app[data-theme="dark"] .rps-search-row {
  background: #1f2937;
}
.rps-search-leading {
  font-size: 18px;
  width: 24px;
  text-align: center;
  opacity: 0.85;
}
.rps-search-trailing {
  font-size: 18px;
  width: 24px;
  text-align: center;
  opacity: 0.9;
}
.rps-search-label {
  font-weight: 800;
}

.rps-body {
  padding: 10px 2px 4px;
}

/* Collapsed content (Recent) */
.rps-recent-title {
  margin: 14px 0 8px;
  font-weight: 900;
}
.rps-recent-list {
  background: transparent;
}
.rps-recent-row {
  display: flex;
  gap: 12px;
  padding: 14px 6px;
  border-bottom: 1px solid #d1d5db;
}
.rps-recent-row.is-last {
  border-bottom: 0;
}
.app[data-theme="dark"] .rps-recent-row {
  border-bottom-color: #334155;
}
.rps-recent-ico {
  font-size: 18px;
  opacity: 0.85;
  line-height: 1.4;
}
.rps-recent-title {
  font-weight: 900;
}
.rps-recent-sub {
  opacity: 0.85;
  font-size: 0.95rem;
}

/* Expanded form */
.rps-form {
  display: flex;
  flex-direction: column;
  gap: 12px;
}
.rps-label {
  font-weight: 800;
}
.rps-input {
  width: 100%;
  padding: 13px 14px;
  border-radius: 12px;
  border: 1px solid var(--color-border);
  background: var(--color-bg);
  color: inherit;
}
.rps-input:focus {
  outline: none;
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.25);
}

.rps-btn {
  width: 100%;
  padding: 14px 16px;
  border-radius: 12px;
  font-weight: 900;
  border: 1px solid var(--color-border);
  background: var(--color-bg);
  cursor: pointer;
}
.rps-btn-primary {
  background: var(--color-blue);
  border-color: var(--color-blue);
  color: #fff;
  box-shadow: 0 10px 22px rgba(37, 99, 235, 0.25);
}

/* Preview card in expanded mode */
.rps-preview-card {
  margin-top: 12px;
  border: 1px solid var(--color-border);
  border-radius: 16px;
  padding: 14px;
  background: var(--color-bg);
}
.rps-preview-title {
  font-weight: 900;
  font-size: 20px;
  margin-bottom: 10px;
}
.rps-meta {
  display: flex;
  gap: 16px;
  margin-bottom: 12px;
  opacity: 0.95;
}
.rps-meta-item {
  font-weight: 800;
}

.rps-alert {
  display: flex;
  gap: 10px;
  align-items: flex-start;
  border: 2px solid #f59e0b;
  background: #fff7ed;
  color: #7c2d12;
  border-radius: 12px;
  padding: 12px;
}
.rps-alert-ico {
  font-size: 20px;
}
.rps-alert-title {
  font-weight: 900;
  margin-bottom: 2px;
}
.app[data-theme="dark"] .rps-alert {
  background: #1f1304;
  border-color: #b45309;
  color: #f59e0b;
}

/* Search field in expanded mode */
.rps-subtitle {
  margin-top: 14px;
  font-weight: 900;
  font-size: 18px;
}
.rps-search-input {
  margin-top: 10px;
  display: flex;
  align-items: center;
  gap: 10px;
  border: 1px solid var(--color-border);
  border-radius: 9999px;
  background: var(--color-bg);
  padding: 6px 10px;
}
.rps-search-ico {
  opacity: 0.9;
}
.rps-input-ghost {
  flex: 1;
  border: 0;
  outline: 0;
  background: transparent;
  padding: 10px 6px;
  color: inherit;
}

/* Location result card */
.rps-location-card {
  margin-top: 12px;
  border: 1px solid var(--color-border);
  border-radius: 16px;
  padding: 14px;
  background: var(--color-bg);
}
.rps-location-title {
  font-weight: 900;
  font-size: 20px;
  margin-bottom: 8px;
}

/* Open height behavior (simple): give a max height and scroll inside */
.rps-sheet.is-open {
  max-height: 72vh;
  overflow: auto;
}

/* === Scope full-screen map to Live page only ===================== */

/* Default everywhere: don't force height */
.map-wrapper {
  height: auto !important;
  min-height: 0 !important;
}

/* Live page only: map fills the viewport */
.page.page-live .map-wrapper {
  height: 100vh !important;
  min-height: 0 !important;
  position: relative; /* keep FABs positioned */
}

/* Make sure only the active page is visible (belt & suspenders) */
.app .page {
  display: none;
}
.app .page.is-active {
  display: block;
}

/* Keep the bottom sheet and FABs above the map */
.rps-sheet {
  z-index: 99950;
}
.map-fab {
  z-index: 99940;
}

/* animate the sheet height when snapping */
.rps-sheet {
  transition: height 160ms ease;
}

/* Full-screen variant for Create Account card */
.cam-card--full {
  width: 100vw;
  height: 100vh;
  max-width: none;
  max-height: none;
  border-radius: 0;
  border: 0;
  box-shadow: none;
  padding: max(16px, env(safe-area-inset-top)) 16px
    max(16px, env(safe-area-inset-bottom));
  display: flex;
  flex-direction: column;
  overflow: auto; /* scroll the content if it’s long */
}

/* make the close button a touch larger in FS mode */
.cam-card--full .cam-close {
  font-size: 22px;
}

.cam-card.cam-card--full {
  width: 100vw;
  height: 100vh;
  max-width: none;
  max-height: none;
  border-radius: 0;
  border: 0; /* optional */
  padding: 20px 22px;
}

/* Make Learn-More modal truly full-bleed like CreateUserAccount */
.culm-backdrop {
  z-index: var(--z-overlay); /* already added earlier */
}

/* NEW: remove the 12px backdrop padding & centering when full */
.culm-backdrop--full {
  padding: 0 !important;
  align-items: stretch !important;
  justify-content: stretch !important;
}

/* Ensure the card itself fills the viewport */
.culm-card.culm-card--full {
  width: 100vw;
  height: 100vh;
  max-width: none;
  max-height: none;
  border-radius: 0;
  border: 0;
  box-shadow: none;
  box-sizing: border-box;
  padding: max(16px, env(safe-area-inset-top)) 16px
    max(16px, env(safe-area-inset-bottom));
  display: flex;
  flex-direction: column;
  overflow: auto;
}

/* Slightly larger close button in FS */
.culm-card.culm-card--full .culm-close {
  font-size: 22px;
}

/* “Learn More” round icon badge */
.cam-learn-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
}
.cam-learn-ico-badge {
  display: inline-grid;
  place-items: center;
  width: 22px;
  height: 22px;
  border-radius: 9999px;
  border: 2px solid #9ca3af; /* neutral ring */
  font-size: 12px;
  line-height: 1;
  color: #374151;
}
.app[data-theme="dark"] .cam-learn-ico-badge {
  border-color: #64748b;
  color: #e5e7eb;
}

/* FAB sits above the sheet */
.theme-fab {
  bottom: calc(var(--rps-height, 320px) + 96px) !important;
}

/* Hide the FAB when sheet is expanded/form or while dragging */
.hide-theme-fab .theme-fab {
  opacity: 0;
  pointer-events: none;
  transform: scale(0.92);
  transition: opacity 120ms ease, transform 120ms ease;
}

.rps-sheet.rps-full {
  max-height: 100vh;
  height: 100vh !important;
  border-top-left-radius: 0;
  border-top-right-radius: 0;
  padding-bottom: max(10px, env(safe-area-inset-bottom));
}

.rps-close {
  position: absolute;
  top: 8px;
  right: 12px;
  border: 0;
  background: transparent;
  font-size: 22px;
  color: #6b7280;
  cursor: pointer;
  line-height: 1;
}
.rps-close:focus-visible {
  outline: 2px solid #2563eb;
  border-radius: 6px;
}
.app[data-theme="dark"] .rps-close {
  color: #94a3b8;
}

/* Full-screen in form mode */
.rps-sheet.rps-full {
  max-height: 100vh;
  height: 100vh !important;
  border-top-left-radius: 0;
  border-top-right-radius: 0;
  padding-bottom: max(12px, env(safe-area-inset-bottom));
}

/* Header (icon + title + close) */
.rps-header {
  position: relative;
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px 16px 8px;
}
.rps-h-ico {
  font-size: 28px;
  color: #3b82f6;
}
.rps-h-title {
  margin: 0;
  font-size: 28px;
  font-weight: 900;
  line-height: 1.2;
}

.rps-close {
  position: absolute;
  right: 16px;
  bottom: 6px;
  border: 0;
  background: transparent;
  font-size: 24px;
  line-height: 1;
  color: #111827;
  cursor: pointer;
}
.app[data-theme="dark"] .rps-close {
  color: #e5e7eb;
}
.rps-close:focus-visible {
  outline: 2px solid #2563eb;
  border-radius: 6px;
}

/* Form spacing + bigger inputs */
.rps-form--pretty {
  margin-top: 6px;
}
.rps-input--lg {
  height: 48px;
  border-radius: 12px;
  font-size: 15px;
}
.rps-btn--lg {
  height: 48px;
  border-radius: 12px;
  font-weight: 800;
}

/* White card like screenshot #2 */
.rps-card {
  margin-top: 14px;
  padding: 16px;
  background: #fff;
  border: 1px solid #e5e7eb;
  border-radius: 14px;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.04);
}
.rps-card-title {
  font-size: 22px;
  font-weight: 900;
  margin-bottom: 10px;
}
.app[data-theme="dark"] .rps-card {
  background: #111827;
  border-color: #374151;
  color: #e5e7eb;
}

/* Meta row under the card title */
.rps-meta {
  display: flex;
  gap: 18px;
  margin-bottom: 12px;
  color: #374151;
}
.app[data-theme="dark"] .rps-meta {
  color: #cbd5e1;
}
.rps-meta-item {
  font-weight: 800;
}

/* Orange “Traffic Impact” alert */
.rps-alert {
  border: 2px solid transparent;
  border-radius: 12px;
  padding: 14px;
  display: flex;
  gap: 12px;
  align-items: flex-start;
}
.rps-alert-ico {
  font-size: 20px;
}
.rps-alert--amber {
  border-color: #f59e0b;
  background: #fff7ed;
  color: #7c2d12;
}
.rps-alert--light {
  border-color: #fdba74;
  background: #fffbeb;
  color: #7c2d12;
}
.app[data-theme="dark"] .rps-alert--amber,
.app[data-theme="dark"] .rps-alert--light {
  background: #1f1304;
  border-color: #b45309;
  color: #f59e0b;
}
.rps-alert-title {
  font-weight: 900;
  margin-bottom: 2px;
}

/* Search pill within the form */
.rps-search-input--pill {
  border-radius: 9999px;
  padding: 10px 12px;
}
.rps-search-input--pill .rps-input-ghost {
  font-size: 15px;
}

/* New compact panel spacing */
.sm-panel--new {
  padding: 14px 16px 18px;
}

/* Header/avatar row */
.sm-user-row {
  display: flex;
  align-items: center;
  gap: 12px;
  margin: 4px 0 14px;
}
.sm-avatar {
  width: 48px;
  height: 48px;
  border-radius: 9999px;
  display: grid;
  place-items: center;
  background: #eef2ff;
  border: 1px solid #e5e7eb;
  font-size: 22px;
}
.sm-user-main {
  display: grid;
  gap: 6px;
}
.sm-user-name {
  font-weight: 800;
  font-size: 16px;
}
.sm-user-pill {
  padding: 6px 10px;
  border-radius: 9999px;
  font-weight: 700;
  border: 0;
  background: #e0e7ff;
  color: #1e40af;
  width: max-content;
}

/* Nav list (cleaner) */
.sm-nav {
  display: grid;
  gap: 8px;
  margin: 8px 0 14px;
}
.sm-nav-item {
  display: flex;
  align-items: center;
  gap: 10px;
  width: 100%;
  padding: 12px 14px;
  border-radius: 12px;
  border: 1px solid var(--color-border);
  background: #fff;
  font-weight: 700;
  text-align: left;
  cursor: pointer;
}
.sm-nav-item .sm-nav-ico {
  width: 22px;
  text-align: center;
}
.sm-nav-item.is-locked {
  color: #6b7280;
  background: #f8fafc;
  position: relative;
}
.sm-nav-item.is-active {
  background: #2563eb;
  color: #fff;
  border-color: #2563eb;
  box-shadow: 0 10px 22px rgba(37, 99, 235, 0.25);
}
.sm-lock {
  margin-left: auto;
}

/* Cards */
.sm-cards {
  display: grid;
  gap: 14px;
}
.sm-card {
  border: 1px solid #e5e7eb;
  background: #fff;
  border-radius: 18px;
  padding: 16px;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.04);
}
.sm-card--ghost {
  text-align: center;
}
.sm-card-head {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 6px;
}
.sm-card-ico {
  font-size: 18px;
}
.sm-card-title {
  margin: 0;
  font-size: 18px;
  font-weight: 800;
}
.sm-card-text {
  margin: 8px 0 12px;
  color: #4b5563;
}
.sm-card-cta {
  padding: 10px 14px;
  border-radius: 12px;
  font-weight: 800;
  border: 1px solid var(--color-blue);
  background: var(--color-blue);
  color: #fff;
}

/* Dark mode tweaks */
.app[data-theme="dark"] .sm-nav-item {
  background: #0b1220;
  border-color: #334155;
  color: #e5e7eb;
}
.app[data-theme="dark"] .sm-nav-item.is-locked {
  color: #94a3b8;
}
.app[data-theme="dark"] .sm-card {
  background: #111827;
  border-color: #374151;
  color: #e5e7eb;
}
.app[data-theme="dark"] .sm-avatar {
  background: #0b1220;
  border-color: #334155;
}
.app[data-theme="dark"] .sm-user-pill {
  background: #1e3a8a;
  color: #dbeafe;
}

.theme-fab {
  right: 16px;
  bottom: 88px;
} /* move theme up a bit */

/* RPS writes this value; keep a default for initial paint */
:root {
  --rps-height: 320px;
}

/* Base FAB already styled; ensure z-index/size are solid */
.map-fab {
  position: absolute !important;
  right: 16px !important;
  width: 56px !important;
  height: 56px !important;
  border-radius: 9999px !important;
  display: grid;
  place-items: center;
  box-shadow: 0 10px 24px rgba(0, 0, 0, 0.18);
  z-index: 99960; /* above rps-sheet */
}

/* Theme sits higher */
.theme-fab {
  bottom: calc(var(--rps-height, 320px) + 96px) !important;
}

/* Incident sits closer to the sheet edge */
.incident-fab {
  bottom: calc(var(--rps-height, 320px) + 24px) !important;
}

/* Dark theme consistency */
.app[data-theme="dark"] .map-fab {
  background: #0b1220;
  border: 1px solid #334155;
  color: #e5e7eb;
}

.hide-map-fabs .map-fab {
  opacity: 0;
  pointer-events: none;
  transform: translateY(6px) scale(0.95);
  transition: opacity 140ms ease, transform 140ms ease;
}

/* === Report Incident: full-height sheet variant ===================== */
.rif-backdrop--full {
  padding: 0 !important;
  align-items: stretch !important; /* fill screen */
  justify-content: stretch !important;
}

.rif-card--sheet {
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  width: 100vw;
  height: 100vh; /* full height */
  max-width: none;
  max-height: none;
  border-radius: 22px 22px 0 0; /* rounded top like your mock */
  border: 0;
  box-shadow: 0 -10px 40px rgba(0, 0, 0, 0.25);
  padding: max(16px, env(safe-area-inset-top)) 16px
    max(16px, env(safe-area-inset-bottom));
  overflow: auto; /* scroll content */
  background: var(--color-bg);
}

/* keep action buttons visible when scrolled */
.rif-card--sheet .rif-footer {
  position: sticky;
  bottom: 0;
  background: var(--color-bg);
  padding-bottom: max(12px, env(safe-area-inset-bottom));
  z-index: 1;
  border-top: 1px solid var(--color-border);
}

/* dark theme polish */
.app[data-theme="dark"] .rif-card--sheet {
  background: #111827;
  border-color: #374151;
  box-shadow: 0 -16px 50px rgba(0, 0, 0, 0.5);
}

/* Bell FAB */
.floating-notification-fab {
  position: absolute; /* relative to .map-wrapper */
  top: 88px; /* just below your menu FAB */
  left: 16px;
  width: 48px;
  height: 48px;
  border-radius: 999px;
  background: var(--fab-bg, #fff);
  color: var(--fab-fg, #111);
  border: 0;
  box-shadow: 0 6px 18px rgba(0, 0, 0, 0.18);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  z-index: 20;
  transition: transform 0.12s ease, box-shadow 0.12s ease, opacity 0.12s ease;
}
.floating-notification-fab:hover {
  transform: translateY(-1px);
}
.floating-notification-fab:active {
  transform: translateY(0);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.18);
}

/* Optional: respect your "hide map fabs" mode */
.hide-map-fabs .floating-notification-fab {
  opacity: 0;
  pointer-events: none;
}

/* Dark theme tweak */
[data-theme="dark"] .floating-notification-fab {
  --fab-bg: #1f2327;
  --fab-fg: #f5f7fa;
  box-shadow: 0 6px 18px rgba(0, 0, 0, 0.5);
}

.map-overlays-tl {
  position: absolute;
  top: calc(env(safe-area-inset-top, 0px) + 12px);
  left: 12px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  z-index: 9999;
  pointer-events: none;
}
.map-overlays-tl > * {
  pointer-events: auto;
}

.hide-map-fabs .map-overlays-tl {
  opacity: 0;
  pointer-events: none;
}

/* ===== Notifications Modal (notif-*) ===== */
.notif-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.35);
  z-index: var(--z-overlay);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 16px;
}

.notif-card {
  position: relative;
  width: min(560px, 92vw);
  background: #fff;
  color: #111827;
  border: 1px solid var(--color-border);
  border-radius: 20px;
  box-shadow: 0 24px 70px rgba(0, 0, 0, 0.25);
  padding: 18px 18px 20px;
}

.notif-close {
  position: absolute;
  top: 10px;
  right: 12px;
  border: 0;
  background: transparent;
  font-size: 20px;
  color: #6b7280;
  cursor: pointer;
}

.notif-head {
  display: flex;
  align-items: center;
  gap: 10px;
}
.notif-head-ico {
  font-size: 24px;
  color: #2563eb;
}
.notif-title {
  margin: 0;
  font-size: 26px;
  font-weight: 900;
}
.notif-sub {
  color: #6b7280;
  margin: 6px 0 10px;
}

.notif-list {
  display: grid;
  gap: 12px;
}

.notif-item {
  border: 1px solid #d1d5db;
  border-radius: 14px;
  background: #f9fafb;
  padding: 14px 14px 12px;
}
.notif-time {
  color: #6b7280;
  font-size: 14px;
  margin-bottom: 6px;
}
.notif-item-title {
  font-weight: 800;
}
.notif-item-desc {
  margin-top: 6px;
  color: #374151;
}

.app[data-theme="dark"] .notif-card {
  background: #111827;
  color: #e5e7eb;
  border-color: #374151;
  box-shadow: 0 26px 70px rgba(0, 0, 0, 0.55);
}
.app[data-theme="dark"] .notif-item {
  background: #0b1220;
  border-color: #334155;
}
.app[data-theme="dark"] .notif-time {
  color: #9ca3af;
}
.app[data-theme="dark"] .notif-item-desc {
  color: #cbd5e1;
}
/* ===== [FIX] Saved Routes toolbar should never move ===== */
:root {
  --sr-toolbar-h: 72px;
  --sr-search-h: 48px;
}

.sr-toolbar {
  display: grid !important;
  grid-template-columns: minmax(0, 1fr) auto !important; /* search | chips */
  align-items: center !important;
  column-gap: 16px !important;
  margin-bottom: 0 !important;
  height: var(--sr-toolbar-h) !important; /* lock vertical size */
  min-height: var(--sr-toolbar-h) !important;
}

/* Stable search box */
.sr-search {
  min-height: var(--sr-search-h) !important;
  height: var(--sr-search-h) !important;
  box-sizing: border-box;
}

/* Chips: one line only; never wrap; never change height */
.sr-filters {
  display: inline-flex !important;
  gap: 12px !important;
  white-space: nowrap !important;
  overflow-x: auto !important; /* scroll horizontally if needed */
  overflow-y: hidden !important;

  /* hide scrollbars so they don't add/subtract height */
  scrollbar-width: none;
}
.sr-filters::-webkit-scrollbar {
  display: none;
}

/* Chip dimensions are fixed; font weight changes won’t resize them */
.sr-chip {
  height: 44px !important;
  line-height: 44px !important;
  padding: 0 18px !important;
  display: inline-block !important;
  font-weight: 600 !important; /* active state uses same weight */
}

/* Make sure active state never adds size via borders */
.sr-chip,
.sr-chip.active {
  border-width: 1px !important;
  box-shadow: none; /* visual jump guard; keep if you prefer */
}

/* Accessibility without layout shift */
.sr-chip:focus-visible {
  outline: 2px solid rgba(37, 99, 235, 0.55);
  outline-offset: 2px;
  box-shadow: none; /* outlines don’t change layout */
}

/* Small screens can stack, but still keep the fixed heights */
@media (max-width: 640px) {
  .sr-toolbar {
    grid-template-columns: 1fr !important;
    row-gap: 10px !important;
    height: auto !important; /* allow two rows */
    min-height: calc(var(--sr-toolbar-h) + 44px) !important;
  }
}
/* ===== Saved Routes: keep cards snapped to the search row ===== */
:root {
  --sr-stack-gap: 14px;
} /* one rhythm to rule them all */

/* Make the main column a simple vertical stack with a fixed gap */
.sr-main {
  display: grid !important;
  grid-auto-rows: min-content !important;
  row-gap: var(--sr-stack-gap) !important;
}

/* List/empty states never add unexpected top space */
.sr-list,
.sr-empty {
  margin-top: 0 !important;
  padding-top: 0 !important;
}

/* Defensive: ensure first card doesn’t carry a stray top margin */
.sr-list > .sr-route-card:first-child {
  margin-top: 0 !important;
}

/* Backdrop + sheet */
.nsm-close {
  all: unset;
  cursor: pointer;
  font-size: 24px;
  line-height: 1;
}
.nsm-gear {
  font-size: 28px;
  margin-right: 10px;
}

.ns-sheet-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.35);
  display: flex;
  justify-content: center;
  align-items: flex-end;
  z-index: var(--z-overlay, 99990);
}
.ns-sheet {
  width: 100%;
  max-width: 540px;
  background: var(--panel, #fff);
  border-top-left-radius: 22px;
  border-top-right-radius: 22px;
  box-shadow: 0 -12px 40px rgba(0, 0, 0, 0.25);
  max-height: 92vh;
  overflow: auto;
}

/* Header */
.nsm-header {
  position: sticky;
  top: 0;
  background: var(--panel, #fff);
  padding: 18px 20px;
  border-bottom: 1px solid var(--border, #e5e7eb);
  display: flex;
  align-items: center;
  justify-content: space-between;
  z-index: 1;
}
.nsm-title-wrap {
  display: flex;
  align-items: center;
  gap: 8px;
}
.nsm-title {
  margin: 0;
  font-size: 20px;
  font-weight: 700;
}

/* Content container */
.nsm-content {
  padding: 14px 16px 28px;
}

/* Section/card */
.nsm-card {
  background: var(--panel, #fff);
  border: 1px solid var(--border, #e5e7eb);
  border-radius: 18px;
  margin-bottom: 16px;
}
.nsm-card-head {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 14px 16px;
  border-bottom: 1px solid var(--border, #e5e7eb);
}
.nsm-card-ico {
  font-size: 20px;
}
.nsm-card-title {
  margin: 0;
  font-size: 18px;
  font-weight: 700;
}
.nsm-card-body {
  padding: 6px 10px 10px;
}

/* List items */
.nsm-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px;
  border-radius: 14px;
  border: 1px solid transparent;
  margin: 8px 6px;
  background: var(--panel, #fff);
}
.nsm-item:hover {
  border-color: var(--border, #e5e7eb);
}
.nsm-item-left {
  display: flex;
  gap: 12px;
  align-items: center;
}
.nsm-item-ico {
  font-size: 22px;
}
.nsm-item-title {
  font-weight: 600;
  font-size: 16px;
}
.nsm-item-desc {
  color: #6b7280;
  font-size: 13px;
  line-height: 1.2;
}

/* Switch (iOS-like) */
.nsm-switch {
  width: 58px;
  height: 32px;
  border-radius: 999px;
  border: 1px solid #e5e7eb;
  background: #f3f4f6;
  position: relative;
  transition: 0.2s ease;
  padding: 0;
}
.nsm-switch-knob {
  position: absolute;
  top: 3px;
  left: 3px;
  width: 26px;
  height: 26px;
  border-radius: 50%;
  background: #fff;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);
  transition: 0.2s ease;
}
.nsm-switch.is-on {
  background: #10b981;
  border-color: #10b981;
}
.nsm-switch.is-on .nsm-switch-knob {
  transform: translateX(26px);
}

/* Fields */
.nsm-field {
  padding: 4px 12px 14px;
  margin: 0 6px 6px;
}
.nsm-field-top {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
}
.nsm-label {
  font-weight: 600;
}
.nsm-hint {
  color: #6b7280;
  font-variant-numeric: tabular-nums;
}

/* Range */
.nsm-range {
  width: 100%;
  appearance: none;
  height: 4px;
  border-radius: 999px;
  background: #e5e7eb;
}
.nsm-range::-webkit-slider-thumb {
  appearance: none;
  width: 22px;
  height: 22px;
  border-radius: 50%;
  background: #a855f7;
  border: none;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
}
.nsm-range::-moz-range-thumb {
  width: 22px;
  height: 22px;
  border-radius: 50%;
  background: #a855f7;
  border: none;
}

/* Full-page size (match your old page footprint) */
.ns-sheet-backdrop.nsm-full {
  align-items: stretch; /* top-to-bottom, not bottom sheet */
}
.ns-sheet-backdrop.nsm-screen {
  background: var(--panel, #fff);
  align-items: stretch; /* not bottom-aligned */
  justify-content: stretch;
}

.ns-sheet.nsm-full {
  max-width: none; /* remove 540px cap */
  width: 100vw;
  height: 100vh;
  border-top-left-radius: 0;
  border-top-right-radius: 0;
  box-shadow: none; /* looks like a page, not a floating card */
}
.ns-sheet.nsm-screen {
  max-width: none !important;
  box-shadow: none !important;
  border-radius: 0 !important;
  display: flex; /* make content grow */
  flex-direction: column;
}

/* Optional: give the page the same paddings you had before */
.nsm-content {
  flex: 1;
  overflow: auto;
  padding-bottom: max(24px, env(safe-area-inset-bottom, 16px));
}

/* If you want the header to feel like a normal page header */
.nsm-header {
  position: sticky;
  top: 0;
}

.nsm-screen {
  position: fixed !important;
  inset: 0 !important; /* top:0 right:0 bottom:0 left:0 */
  width: 100vw !important;
  height: 100vh !important;
  margin: 0 !important;
  z-index: var(--z-overlay, 99990);
}
